<!DOCTYPE html>
<html>
  <head>
    <title>API Test Panel</title>
    <style>
      .container {
        max-width: 800px;
        margin: 20px auto;
        padding: 20px;
        font-family: Arial, sans-serif;
      }
      .button-group {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
      }
      button {
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        color: white;
        cursor: pointer;
      }
      .get-all {
        background-color: #3b82f6;
      }
      .get-all:hover {
        background-color: #2563eb;
      }
      .add-new {
        background-color: #22c55e;
      }
      .add-new:hover {
        background-color: #16a34a;
      }
      .get-highest {
        background-color: #a855f7;
      }
      .get-highest:hover {
        background-color: #9333ea;
      }
      #result {
        background-color: #f3f4f6;
        padding: 20px;
        border-radius: 5px;
        white-space: pre-wrap;
        font-family: monospace;
        max-height: 400px;
        overflow: auto;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>API Test Panel</h1>
      <div class="button-group">
        <button class="get-all" onclick="getAllScores()">Get All Scores</button>
        <button class="add-new" onclick="addNewScore()">
          Add Random Score
        </button>
        <button class="get-highest" onclick="getHighestScore()">
          Get Highest Score
        </button>
      </div>
      <h3>Result:</h3>
      <div id="result">No data yet</div>
    </div>

    <script>
      function displayResult(data) {
        const resultDiv = document.getElementById("result");
        if (typeof data === "object") {
          resultDiv.textContent = JSON.stringify(data, null, 2);
        } else {
          resultDiv.textContent = data;
        }
      }

      async function getAllScores() {
        try {
          const response = await fetch("/api/scores");
          const data = await response.json();
          displayResult(data);
        } catch (error) {
          displayResult(`Error: ${error.message}`);
        }
      }

      async function addNewScore() {
        try {
          const newScore = {
            Name: "Test Player",
            Rank: 1,
            Score: Math.floor(Math.random() * 1000),
            Time: new Date().toISOString(),
          };

          const response = await fetch("/api/scores", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(newScore),
          });

          const text = await response.text();
          displayResult(`Status: ${response.status}\nResponse: ${text}`);
        } catch (error) {
          displayResult(`Error: ${error.message}`);
        }
      }

      async function getHighestScore() {
        try {
          const response = await fetch("/api/scores/highest");
          const data = await response.json();
          displayResult(data);
        } catch (error) {
          displayResult(`Error: ${error.message}`);
        }
      }
    </script>
  </body>
</html>
